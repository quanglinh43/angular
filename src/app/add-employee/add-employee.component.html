
<div class="row col-md-12 text-center pt-3">
    <h2>Add Employee</h2>
</div>
<div class="container-fluid col d-flex justify-content-center">
    <div class="col-md-12 px-5">
        <form [formGroup]="inforForm" (ngSubmit)="onSubmit()">
            <div class="col-md-12 row py-3">
                <mat-form-field class="form-group col-md-4">
                    <mat-label  [class.text-red]="f.firstName.errors && f.firstName.dirty">First Name</mat-label>
                    <input matInput type="text" [class.border-red]="f.firstName.errors && f.firstName.dirty" formControlName="firstName" required>
                    <mat-error>
                        <small for="" *ngIf="f.firstName.errors?.['required']">The first name is required</small>
                    </mat-error> 
                </mat-form-field>
                <mat-form-field class="form-group col-md-4">
                    <mat-label  [class.text-red]="f.lastName.errors && f.lastName.dirty"> Last Name</mat-label>
                    <input matInput type="text" [class.border-red]="f.lastName.errors && f.lastName.dirty" formControlName="lastName" required>
                    <mat-error>
                        <small for="" *ngIf="f.lastName.errors?.['required']">The last name is required</small>
                    </mat-error>
                </mat-form-field>
                <mat-form-field class="form-group col-md-4" appearance="fill">
                    <mat-label  [class.text-red]="f.dOB.errors && f.dOB.dirty"> Birthday</mat-label>
                    <input matInput [class.border-red]="f.dOB.errors && f.dOB.dirty" formControlName="dOB" [matDatepicker]="picker" required>
                    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                    <mat-datepicker #picker></mat-datepicker>
                    <mat-error>
                        <small *ngIf="f.dOB.errors?.['required']">The birthday is required</small> 
                    </mat-error>
                </mat-form-field>
            </div>
            <div class="col-md-12 row py-3">
                <mat-form-field class="form-group col-md-4">
                    <mat-label  [class.text-red]="f.email.errors && f.email.dirty">Email</mat-label>
                    <input matInput type="email" [class.border-red]="f.email.errors && f.email.dirty" formControlName="email" required>
                    <mat-error>
                        <small *ngIf="f.email.errors?.['required']">The email is required</small>
                        <small *ngIf="f.email.errors?.['email']">Must be email</small>
                    </mat-error>
                </mat-form-field>
                <mat-form-field class="form-group col-md-4">
                    <mat-label>Telephone</mat-label>
                    <input matInput type="text" formControlName="telephone">
                </mat-form-field>
                <mat-form-field class="form-group col-md-4">
                    <mat-label>Mobiphone</mat-label>
                    <input matInput type="text" formControlName="mobiphone">
                </mat-form-field>
            </div>
            <div class="col-md-12 row py-3">
                <mat-form-field class="form-group col-md-4">
                    <mat-label>Address</mat-label>
                    <input matInput type="text"  formControlName="address">
                </mat-form-field>
                <mat-form-field class="form-group col-md-4">
                    <mat-label>UserLogin</mat-label>
                    <input matInput  type="text" formControlName="userLogin">
                </mat-form-field>
                <mat-form-field appearance="fill" class="col-md-4">
                    <mat-label  [class.text-red]="f.department.errors && f.department.dirty"> Department</mat-label>
                    <mat-select [class.border-red]="f.department.errors && f.department.dirty" formControlName="department" (change)="onChangeOrg()" [(ngModel)]="inforForm.value.department" required>
                        <mat-option value="" selected>--Choose--</mat-option>
                        <span *ngFor="let lv1 of listOrg1" >
                            <mat-option [style.padding-left.px]="15" [value]="lv1.c_Org_Id" class="text-nowrap">
                                {{lv1.name}}
                            </mat-option>
                            <span *ngIf="lv1.c_Orgs">
                                <span *ngFor="let lv2 of lv1.c_Orgs">
                                    <mat-option [style.padding-left.px]="30" [value]="lv2.c_Org_Id" class="text-nowrap">
                                        {{lv2.name}}
                                    </mat-option>
                                    <span *ngIf="lv2.c_Orgs">
                                        <span *ngFor="let lv3 of lv2.c_Orgs">
                                            <mat-option [style.padding-left.px]="45" [value]="lv3.c_Org_Id" class="text-nowrap">
                                                {{lv3.name}}
                                            </mat-option>
                                        </span>
                                    </span>
                                </span>
                            </span>
                        </span>
                    </mat-select>
                    <mat-error>
                        <small for="" *ngIf="f.department.errors?.['required']">The department is required</small>
                    </mat-error>
                </mat-form-field>
            </div>
            <hr>
            <div class="col-md-12 mt-4 pr-3 pb-3">
                <div class="row col-md-12">
                    <h4 class="col-md-6" style="padding-top: 13px;">Working History</h4>
                    <div class="col-md-6 pr-0">
                        <a mat-raised-button class="float-end my-2" (click)="onAddHWClick()" style="color: white; background-color: #708090;" >Add<mat-icon aria-hidden="false" aria-label="Example add icon" fontIcon="add"></mat-icon></a>
                    </div>
                </div>
                <table class="table table-border table-hover table-bordered">
                    <thead class="tableE">
                        <tr class="text-center">
                            <th>No.</th>
                            <th>Job Title</th>
                            <th>Begin</th>
                            <th>End</th>
                            <th>Department</th>
                            <th>Salary Amt</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody *ngIf="count > 0; else rong">
                        <tr *ngFor="let l of listWH; let i = index ; let last = last; let first = first">
                            <td>{{i+1}}</td>
                            <td>{{l.jobTitle}}</td>
                            <td>{{l.from_Date}}</td>
                            <td *ngIf="l.to_Date!=null">{{l.to_Date}}</td>
                            <td *ngIf="l.to_Date==null">Hiện tại</td>
                            <td>{{getNameOrg(l.c_Org_Id)?.name}}</td>
                            <td>{{l.salaryAmt}}</td>
                            <td class="text-center">
                                <div class="form-check form-switch" style="cursor: pointer;" *ngIf="l.isActive;else noActive" (click)="onStatusClick(l.hR_WorkingHistory_Id)">
                                    <input class="form-check-input active" type="checkbox" role="switch" id="flexSwitchCheckCheckedDisabled" checked disabled >
                                    <label class="form-check-label" for="flexSwitchCheckCheckedDisabled"></label>
                                </div>
                                <ng-template #noActive>
                                    <div class="form-check form-switch" style="cursor: pointer;" (click)="onStatusClick(l.hR_WorkingHistory_Id)">
                                        <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDisabled" disabled >
                                        <label class="form-check-label" for="flexSwitchCheckDisabled"></label>
                                      </div>
                                </ng-template>
                            </td>
                            <td class="text-center" *ngIf="first">
                                <a style="color: #708090;" [routerLink]="['/update-wh']" routerLinkActive="router-link-active" (click)="onUpdateWHClick(l.hR_WorkingHistory_Id)"> <mat-icon aria-hidden="false" aria-label="Example edit_square icon" fontIcon="edit_square"></mat-icon></a>
                                &nbsp;&nbsp;
                                <a style="text-decoration: underline; color: #708090; cursor: pointer;" (click)="onDeleteWHClick(l.hR_WorkingHistory_Id)" ><mat-icon aria-hidden="false" aria-label="Example delete icon" fontIcon="delete"></mat-icon></a>
                            </td>
                        </tr>
                    </tbody>
                    <ng-template #rong>
                        <tbody >
                            <tr class="text-center py-3">
                                No Work History
                            </tr>
                        </tbody>
                    </ng-template>
                </table>
            </div>
            <hr class="py-3">
            <!-- <button type="submit" class="btn btn-success">Add</button> -->
            <button mat-raised-button  type="submit" style="color: white; background-color: #708090;" >Add <mat-icon aria-hidden="false" aria-label="Example note_add icon" fontIcon="note_add"></mat-icon></button>
            <button mat-raised-button type="reset" class="mx-3" style="color: white; background-color: #708090;">Clear <mat-icon aria-hidden="false" aria-label="Example clear_all icon" fontIcon="clear_all"></mat-icon></button>
            <button mat-raised-button type="button" [routerLink]="['']" routerLinkActive="router-link-active" style="color: white; background-color: #708090;">Back<mat-icon aria-hidden="false" aria-label="Example arrow_back icon" fontIcon="arrow_back"></mat-icon></button>
        </form>
    </div>
</div>
